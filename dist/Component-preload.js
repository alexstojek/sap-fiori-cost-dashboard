//@ui5-bundle my/fiori/app/Component-preload.js
sap.ui.predefine("my/fiori/app/Component", ["sap/ui/core/UIComponent","sap/ui/Device","my/fiori/app/model/models"],function(e,i,t){"use strict";return e.extend("my.fiori.app.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(t.createDeviceModel(),"device")}})});
sap.ui.predefine("my/fiori/app/controller/App.controller", ["sap/ui/core/mvc/Controller"],function(n){"use strict";return n.extend("my.fiori.app.controller.App",{onInit:function(){}})});
sap.ui.predefine("my/fiori/app/controller/CostReport.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,r,a,n){"use strict";return e.extend("my.fiori.app.controller.CostReport",{onCostCenterChange:function(e){var t=e.getSource();var r=t.getSelectedKeys();var i=this.byId("pspFilter");var o=i.getBinding("items");if(r.length>0){var s=[];r.forEach(function(e){s.push(new a("ID",n.Contains,e))});var l=new a({filters:s,and:false});o.filter(l)}else{o.filter([])}this._applyFilters()},onPSPChange:function(e){var t=e.getSource();var a=t.getSelectedKey();var n=this.byId("costCenterFilter");if(a&&a.length>=6){var i=a.slice(-6);n.setSelectedKeys([i]);r.show("Kostenstelle automatisch gesetzt: "+i)}this._applyFilters()},onSearch:function(e){this._applyFilters(e.getParameter("query"))},onFilterSearch:function(){this._applyFilters()},_applyFilters:function(e){var t=[];var r=this.byId("costCenterFilter");var i=r.getSelectedKeys();if(i&&i.length>0){var o=[];i.forEach(function(e){o.push(new a("ID",n.EQ,e))});t.push(new a({filters:o,and:false}))}var s=this.byId("pspFilter");var l=s.getSelectedKey();if(l){t.push(new a("PSPElement",n.EQ,l))}if(e&&e.length>0){var u=[];u.push(new a("ID",n.Contains,e));u.push(new a("Name",n.Contains,e));u.push(new a("Manager",n.Contains,e));u.push(new a("PSPElement",n.Contains,e));t.push(new a({filters:u,and:false}))}var c=this.byId("costCenterTable");var g=c.getBinding("items");g.filter(t)},onFilterClear:function(){this.byId("costCenterFilter").setSelectedKeys([]);this.byId("pspFilter").setSelectedKey(null);this.byId("statusFilter").setSelectedKey("All");this.byId("searchField").setValue("");this._applyFilters();r.show("Filter zurückgesetzt")},statusState:function(e,t){var r=parseFloat(e);var a=parseFloat(t);if(!r||!a){return"None"}if(a>r){return"Error"}else if(a>r*.9){return"Warning"}else{return"Success"}},utilizationPercent:function(e,t){var r=parseFloat(e);var a=parseFloat(t);if(!r||!a){return 0}var n=a/r*100;return n>100?100:n},utilizationText:function(e,t){var r=parseFloat(e);var a=parseFloat(t);if(!r||!a){return"0%"}var n=a/r*100;return n.toFixed(0)+"%"},varianceAmount:function(e,t){var r=parseFloat(e);var a=parseFloat(t);if(isNaN(r)||isNaN(a)){return""}return(r-a).toFixed(2)},onInit:function(){var e=new Date(2026,0,1);var t=new Date(2026,2,31);var r=this.byId("dateRange");if(r){r.setDateValue(e);r.setSecondDateValue(t);var a=this.getOwnerComponent().getModel("kpi");if(a){a.setProperty("/Filter/StartDate",e);a.setProperty("/Filter/EndDate",t)}this._recalculateData(e,t)}},onDateChange:function(e){var t=e.getSource();var a=t.getDateValue();var n=t.getSecondDateValue();if(a&&n){var i=this.getView().getModel("kpi");i.setProperty("/Filter/StartDate",a);i.setProperty("/Filter/EndDate",n);this._recalculateData(a,n);r.show("Daten für Zeitraum aktualisiert.")}},_recalculateData:function(e,t){var r=this.getView().getModel("kpi")||this.getOwnerComponent().getModel("kpi");if(!r){return}var a=r.getProperty("/TableItems");if(!a)return;var n=e.getMonth();var i=e.getFullYear();var o=t.getMonth();var s=t.getFullYear();a.forEach(function(e){var t=0;var r=0;if(e.MonthlyData){e.MonthlyData.forEach(function(e){if(e.Year>=i&&e.Year<=s){if(e.Month>=n&&e.Month<=o){t+=e.Budget;r+=e.Actuals}}})}e.Budget=t;e.Actuals=r});r.setProperty("/TableItems",a)},onCostCenterPress:function(e){var t=e.getParameter("listItem");var a=t.getBindingContext("kpi");var n=a.getProperty("ID");var i=a.getProperty("Name");var o=this.getOwnerComponent().getRouter();o.navTo("RouteDetail",{CostCenterID:n});r.show("Öffne Details für: "+i)},onInsightPress:function(e){var t=e.getSource().getBindingContext("kpi").getPath();var a=this.getView().getModel("kpi");var n=a.getProperty(t);r.show("Analyzing: "+n.Title+"\nAI Suggestion: "+n.Description)},onDSOPress:function(){r.show("Drill-down to Accounts Receivable...");var e=this.getOwnerComponent().getRouter();e.navTo("RouteDetail",{CostCenterID:"AR"})},onCashPress:function(){r.show("Drill-down to Cash Flow Statement...")},onInvoicePress:function(e){var t=e.getSource().getBindingContext("kpi").getPath();var a=this.getView().getModel("kpi").getProperty(t);r.show("Opening Invoice: "+a.DocumentNumber)},onActionTrigger:function(e){r.show("Action Triggered: Sending Reminder Email...")},onFilterChange:function(e){r.show("Filter Changed: Reloading Dashboard Data...")}})});
sap.ui.predefine("my/fiori/app/controller/Detail.controller", ["sap/ui/core/mvc/Controller"],function(t){"use strict";return t.extend("my.fiori.app.controller.Detail",{formatter:{formatDateRange:function(t,e){if(!t||!e){return""}var a=sap.ui.core.format.DateFormat.getDateInstance({style:"medium"});return a.format(t)+" - "+a.format(e)}},onInit:function(){var t=this.getOwnerComponent().getRouter();t.getRoute("RouteDetail").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(t){var e=t.getParameter("arguments").CostCenterID;var a=new sap.ui.model.json.JSONModel({currentContext:e});this.getView().setModel(a,"view");var o=new sap.ui.model.json.JSONModel;o.loadData(sap.ui.require.toUrl("my/fiori/app/localService/mockdata/ReportData.json"));this.getView().setModel(o,"report")}})});
sap.ui.predefine("my/fiori/app/controller/View1.controller", ["sap/ui/core/mvc/Controller"],function(n){"use strict";return n.extend("my.fiori.app.controller.View1",{onInit:function(){}})});
sap.ui.predefine("my/fiori/app/initMockServer", ["sap/ui/core/ComponentContainer","sap/m/MessageBox"],function(e,i){"use strict";sap.ui.require(["my/fiori/app/localService/mockserver"],function(n){console.log("Initializing Mock Server...");n.init().catch(function(e){console.error("Mock Server Init Failed:",e);i.error(e.message)}).finally(function(){console.log("Initializing Component...");new e({name:"my.fiori.app",async:true,settings:{id:"fiori_app"}}).placeAt("content")})})});
sap.ui.predefine("my/fiori/app/localService/mockserver", ["sap/ui/core/util/MockServer","sap/ui/model/json/JSONModel","sap/base/Log"],function(e,r,t){"use strict";var a,o="my/fiori/app/",i=o+"localService/mockdata";var n={init:function(n){var s=n||{};return new Promise(function(n,u){var c=sap.ui.require.toUrl(o+"manifest.json"),f=new r(c);console.log("MockServer: Loading manifest from "+c);f.attachRequestCompleted(function(){console.log("MockServer: Manifest loaded. Configuring...");var r=sap.ui.require.toUrl(i),u=f.getProperty("/sap.app/dataSources/mainService"),c=sap.ui.require.toUrl(o+u.settings.localUri),p=/.*\/$/.test(u.uri)?u.uri:u.uri+"/";a=new e({rootUri:p});e.config({autoRespond:true,autoRespondAfter:s.delay||500});a.simulate(c,{sMockdataBaseUrl:r,bGenerateMissingMockData:true});var l=a.getRequests();var d=function(e,r,t){t.response=function(t){t.respond(e,{"Content-Type":"text/plain;charset=utf-8"},r)}};if(s.metadataError){l.forEach(function(e){if(e.path.toString().indexOf("$metadata")>-1){d(500,"metadata Error",e)}})}var m=s.errorType,v=m==="badRequest"?400:500;if(m){l.forEach(function(e){d(v,m,e)})}a.setRequests(l);a.start();t.info("Running the app with mock data");n()});f.attachRequestFailed(function(){var e="Failed to load application manifest";console.error(e);t.error(e);u(new Error(e))})})}};return n});
sap.ui.predefine("my/fiori/app/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"my/fiori/app/i18n/i18n.properties":'appTitle=Fiori Kostenbericht\r\nappDescription=Eine App zur \\u00dcberwachung von Kostenstellenbudgets\r\n\r\n# CostReport View\r\ntitle=Kostenstellen \\u00dcbersicht\r\ntitleExpanded=Q1 2026 Budget vs. Ist-Kosten\r\nsearchPlaceholder=Nach Kostenstelle suchen...\r\n\r\n# KPIs\r\nkpiTotalBudget=Gesamtbudget\r\nkpiTotalActuals=Gesamtkosten\r\nkpiOpenBudget=Offenes Budget\r\n\r\n# Table Columns\r\ncolCostCenter=Kostenstelle\r\ncolDescription=Beschreibung\r\ncolBudget=Budget\r\ncolActuals=Ist-Kosten\r\ncolUtilization=Ausnutzung\r\n\r\n# Detail View\r\ndetailTitle=Einzelbuchungen\r\ndetailSubtitle=Details f\\u00fcr {0}\r\ncolPostingDate=Buchungsdatum\r\ncolText=Buchungstext\r\ncolCategory=Kostenart\r\ncolAmount=Betrag\r\n\r\n# Actions\r\nbtnExport=Excel Export\r\n',
	"my/fiori/app/manifest.json":'{"_version":"1.49.0","sap.app":{"id":"my.fiori.app","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"title":"{{appTitle}}","description":"{{appDescription}}","applicationVersion":{"version":"1.0.0"},"dataSources":{"mainService":{"uri":"/sap/opu/odata/sap/Z_COST_REPORT_SRV/","type":"OData","settings":{"localUri":"localService/metadata.xml"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.108.0","libs":{"sap.ui.core":{},"sap.m":{},"sap.f":{},"sap.suite.ui.microchart":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"my.fiori.app.i18n.i18n","supportedLocales":[""],"fallbackLocale":""}},"kpi":{"type":"sap.ui.model.json.JSONModel","uri":"localService/mockdata/GlobalKPIs.json"},"detail":{"type":"sap.ui.model.json.JSONModel","uri":"localService/mockdata/DetailData.json"},"":{"dataSource":"mainService","preload":true,"settings":{"synchronizationMode":"None","operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"viewPath":"my.fiori.app.view","controlAggregation":"pages","controlId":"app","clearControlAggregation":false},"routes":[{"name":"RouteCostReport","pattern":"","target":["TargetCostReport"]},{"name":"RouteDetail","pattern":"CostCenter/{CostCenterID}","target":["TargetDetail"]}],"targets":{"TargetCostReport":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewName":"CostReport"},"TargetDetail":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewName":"Detail"}}},"rootView":{"viewName":"my.fiori.app.view.App","type":"XML","async":true,"id":"App"},"flexBundle":false}}',
	"my/fiori/app/view/App.view.xml":'<mvc:View controllerName="my.fiori.app.controller.App"\r\n    xmlns:html="http://www.w3.org/1999/xhtml"\r\n    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"\r\n    xmlns="sap.m"\r\n    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><App id="app"></App></mvc:View>\r\n',
	"my/fiori/app/view/CostReport.view.xml":'<mvc:View\r\n    controllerName="my.fiori.app.controller.CostReport"\r\n    xmlns:mvc="sap.ui.core.mvc"\r\n    xmlns="sap.m"\r\n    xmlns:f="sap.f"\r\n    xmlns:layout="sap.ui.layout"\r\n    xmlns:micro="sap.suite.ui.microchart"\r\n    xmlns:core="sap.ui.core"><f:DynamicPage id="dynamicPage" headerExpanded="true" toggleHeaderOnTitleClick="true" backgroundDesign="Transparent"><f:title><f:DynamicPageTitle><f:heading><Title text="Kostenstellen-Cockpit"/></f:heading><f:expandedContent><Label text="Operative Finanzübersicht Q1 2026"/></f:expandedContent></f:DynamicPageTitle></f:title><f:header><f:DynamicPageHeader pinnable="true"><HBox wrap="Wrap" alignItems="Start"><VBox class="sapUiMediumMarginEnd"><Label text="Zeitraum" labelFor="dateRange"/><DateRangeSelection id="dateRange" width="15rem" placeholder="Jan 2026 - Mar 2026" change="onDateChange"/></VBox><VBox class="sapUiMediumMarginEnd"><Label text="Status" labelFor="statusFilter"/><Select id="statusFilter" width="10rem" change="onFilterSearch"><core:Item key="All" text="Alle"/><core:Item key="Critical" text="Kritisch"/><core:Item key="Warning" text="Warnung"/><core:Item key="Success" text="OK"/></Select></VBox><VBox class="sapUiMediumMarginEnd"><Label text="Kostenstelle" labelFor="costCenterFilter"/><MultiComboBox\r\n                                id="costCenterFilter"\r\n                                width="20rem"\r\n                                placeholder="Kostenstellen wählen"\r\n                                items="{kpi>/CostCenters}"\r\n                                selectionFinish="onCostCenterChange"><core:Item key="{kpi>ID}" text="{kpi>Name} ({kpi>ID})"/></MultiComboBox></VBox><VBox class="sapUiMediumMarginEnd"><Label text="PSP-Element" labelFor="pspFilter"/><ComboBox\r\n                                id="pspFilter"\r\n                                width="20rem" \r\n                                placeholder="Alle PSP-Elemente"\r\n                                items="{kpi>/PSPElements}"\r\n                                change="onPSPChange"><core:Item key="{kpi>ID}" text="{kpi>ID}"/></ComboBox></VBox><HBox alignItems="End" class="sapUiTinyMarginEnd"><Button text="Zurücksetzen" type="Transparent" press="onFilterClear"/></HBox></HBox></f:DynamicPageHeader></f:header><f:content><Table\r\n                id="costCenterTable"\r\n                items="{kpi>/TableItems}"\r\n                growing="true"\r\n                growingThreshold="20"\r\n                mode="SingleSelectMaster"\r\n                itemPress="onCostCenterPress"><headerToolbar><OverflowToolbar><Title text="Kostenstellen Übersicht" level="H2"/><ToolbarSpacer/><SearchField id="searchField" placeholder="Suche..." width="20%" search="onSearch"/><Button icon="sap-icon://excel-attachment" type="Transparent"/></OverflowToolbar></headerToolbar><columns><Column width="15rem"><Text text="Kostenstelle"/></Column><Column width="12rem"><Text text="PSP-Element"/></Column><Column minScreenWidth="Tablet" demandPopin="true" width="10rem"><Text text="Verantwortlich"/></Column><Column hAlign="End" width="8rem"><Text text="Plan (Budget)"/></Column><Column hAlign="End" width="8rem"><Text text="Ist-Kosten"/></Column><Column hAlign="End" width="8rem"><Text text="Abweichung"/></Column><Column width="8rem" hAlign="Center"><Text text="Status"/></Column></columns><items><ColumnListItem type="Navigation" press="onCostCenterPress"><cells><ObjectIdentifier title="{kpi>Name}" text="{kpi>ID}"/><Text text="{kpi>PSPElement}"/><Text text="{kpi>Manager}"/><ObjectNumber\r\n                                number="{kpi>Budget}"\r\n                                unit="{kpi>Currency}"/><ObjectNumber\r\n                                number="{kpi>Actuals}"\r\n                                unit="{kpi>Currency}"\r\n                                state="{= ${kpi>Actuals} > ${kpi>Budget} ? \'Error\' : \'None\'}"/><ObjectNumber\r\n                                number="{\r\n                                    parts: [\r\n                                        {path: \'kpi>Budget\'},\r\n                                        {path: \'kpi>Actuals\'}\r\n                                    ],\r\n                                    formatter: \'.varianceAmount\'\r\n                                }"\r\n                                unit="{kpi>Currency}"\r\n                                state="{= ${kpi>Actuals} > ${kpi>Budget} ? \'Error\' : \'Success\'}"/><ObjectStatus \r\n                                text="{= ${kpi>Actuals} > ${kpi>Budget} ? \'Kritisch\' : \'OK\'}" \r\n                                state="{= ${kpi>Actuals} > ${kpi>Budget} ? \'Error\' : \'Success\'}"\r\n                                icon="{= ${kpi>Actuals} > ${kpi>Budget} ? \'sap-icon://alert\' : \'sap-icon://sys-enter-2\'}"/></cells></ColumnListItem></items></Table></f:content></f:DynamicPage></mvc:View>\r\n',
	"my/fiori/app/view/Detail.view.xml":'<mvc:View\r\n    controllerName="my.fiori.app.controller.Detail"\r\n    xmlns:mvc="sap.ui.core.mvc"\r\n    xmlns="sap.m"\r\n    xmlns:f="sap.f"\r\n    xmlns:layout="sap.ui.layout"\r\n    xmlns:form="sap.ui.layout.form"\r\n    xmlns:core="sap.ui.core"><f:DynamicPage id="dynamicPageDetail" toggleHeaderOnTitleClick="false" backgroundDesign="Solid"><f:title><f:DynamicPageTitle><f:heading><Title text="Kostenstellen-Bericht"/></f:heading><f:expandedContent><Label text="Detailbericht für Kostenstelle"/><Label text="{\r\n                        parts: [\r\n                            {path: \'kpi>/Filter/StartDate\'},\r\n                            {path: \'kpi>/Filter/EndDate\'}\r\n                        ],\r\n                        formatter: \'.formatter.formatDateRange\'\r\n                    }"/></f:expandedContent></f:DynamicPageTitle></f:title><f:header><f:DynamicPageHeader pinnable="true"><layout:Grid defaultSpan="L6 M6 S12"><layout:content><form:SimpleForm editable="false" layout="ResponsiveGridLayout" title="Berichtskopf" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="1" columnsM="1"><form:content><Label text="Kostenstelle"/><Text text="{report>/HeaderInfo/CostCenter}"/><Label text="Kostenartengruppe"/><Text text="{report>/HeaderInfo/CostElementGroup}"/><Label text="Geschäftsjahr"/><Text text="{report>/HeaderInfo/FiscalYear}"/></form:content></form:SimpleForm><form:SimpleForm editable="false" layout="ResponsiveGridLayout" title="Selektion" labelSpanL="4" labelSpanM="4" emptySpanL="0" emptySpanM="0" columnsL="1" columnsM="1"><form:content><Label text="Selektionsdatum"/><Text text="{report>/HeaderInfo/SelectionDate}"/><Label text="Uhrzeit"/><Text text="{report>/HeaderInfo/SelectionTime}"/></form:content></form:SimpleForm></layout:content></layout:Grid></f:DynamicPageHeader></f:header><f:content><Table\r\n                id="reportTable"\r\n                items="{report>/ReportLines}"\r\n                sticky="ColumnHeaders"\r\n                inset="false"\r\n                alternateRowColors="true"\r\n                class="sapUiSmallMarginTop"><headerToolbar><OverflowToolbar><Title text="Berichtszahlen" level="H2"/><ToolbarSpacer/><Button icon="sap-icon://excel-attachment" type="Transparent"/><Button icon="sap-icon://print" type="Transparent"/></OverflowToolbar></headerToolbar><columns><Column width="20rem"><Text text="Bezeichnung"/></Column><Column hAlign="End" width="8rem"><Text text="Plan"/></Column><Column hAlign="End" width="8rem"><Text text="Ist"/></Column><Column hAlign="End" width="8rem"><Text text="Obligo"/></Column><Column hAlign="End" width="8rem"><Text text="Abw. (abs.)"/></Column><Column hAlign="End" width="6rem"><Text text="Abw. (%)"/></Column></columns><items><ColumnListItem highlight="{= ${report>Type} === \'Total\' ? \'Warning\' : (${report>Type} === \'Group\' ? \'Information\' : \'None\')}"><cells><Text text="{report>Description}" wrapping="false" class="{= ${report>Type} === \'Total\' ? \'sapMTextBold\' : \'\' }"/><ObjectNumber\r\n                                number="{path: \'report>Plan\', type: \'sap.ui.model.type.Float\', formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}}"\r\n                                unit="EUR"/><ObjectNumber\r\n                                number="{path: \'report>Actual\', type: \'sap.ui.model.type.Float\', formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}}"\r\n                                unit="EUR"/><ObjectNumber\r\n                                number="{path: \'report>Commitment\', type: \'sap.ui.model.type.Float\', formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}}"\r\n                                unit="EUR"/><ObjectNumber\r\n                                number="{path: \'report>VarianceAbs\', type: \'sap.ui.model.type.Float\', formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}}"\r\n                                unit="EUR"\r\n                                state="{= ${report>VarianceAbs} > 0 ? \'Warning\' : \'Success\'}"/><ObjectNumber\r\n                                number="{path: \'report>VariancePct\', type: \'sap.ui.model.type.Float\', formatOptions: {minFractionDigits: 2, maxFractionDigits: 2}}"\r\n                                unit="%"\r\n                                state="{= ${report>VariancePct} > 0 ? \'Warning\' : \'Success\'}"/></cells></ColumnListItem></items></Table></f:content></f:DynamicPage></mvc:View>\r\n',
	"my/fiori/app/view/View1.view.xml":'<mvc:View controllerName="my.fiori.app.controller.View1"\r\n    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"\r\n    xmlns="sap.m"><Page id="page" title="{i18n>title}"><content><List items="{/Products}" headerText="Products"><StandardListItem title="{Name}" description="{Description}" icon="{PictureUrl}" /></List></content></Page></mvc:View>\r\n'
});
//# sourceMappingURL=Component-preload.js.map
