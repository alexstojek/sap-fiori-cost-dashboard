sap.ui.define(["sap/ui/core/util/MockServer","sap/ui/model/json/JSONModel","sap/base/Log"],function(e,r,t){"use strict";var a,o="my/fiori/app/",i=o+"localService/mockdata";var n={init:function(n){var s=n||{};return new Promise(function(n,u){var c=sap.ui.require.toUrl(o+"manifest.json"),f=new r(c);console.log("MockServer: Loading manifest from "+c);f.attachRequestCompleted(function(){console.log("MockServer: Manifest loaded. Configuring...");var r=sap.ui.require.toUrl(i),u=f.getProperty("/sap.app/dataSources/mainService"),c=sap.ui.require.toUrl(o+u.settings.localUri),p=/.*\/$/.test(u.uri)?u.uri:u.uri+"/";a=new e({rootUri:p});e.config({autoRespond:true,autoRespondAfter:s.delay||500});a.simulate(c,{sMockdataBaseUrl:r,bGenerateMissingMockData:true});var l=a.getRequests();var d=function(e,r,t){t.response=function(t){t.respond(e,{"Content-Type":"text/plain;charset=utf-8"},r)}};if(s.metadataError){l.forEach(function(e){if(e.path.toString().indexOf("$metadata")>-1){d(500,"metadata Error",e)}})}var m=s.errorType,v=m==="badRequest"?400:500;if(m){l.forEach(function(e){d(v,m,e)})}a.setRequests(l);a.start();t.info("Running the app with mock data");n()});f.attachRequestFailed(function(){var e="Failed to load application manifest";console.error(e);t.error(e);u(new Error(e))})})}};return n});
//# sourceMappingURL=mockserver.js.map